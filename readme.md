# koishi-plugin-emoji-like

[![npm](https://img.shields.io/npm/v/koishi-plugin-emoji-like?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-emoji-like)

QQ表情回应/贴表情插件，支持关键词匹配和随机触发，表情库为QQ表情和Emoji表情。目前仅在 LLOneBot 下测试，需启用 HTTP 服务。

## 功能特性

- 关键词匹配自动贴表情
- 支持一个关键词对应多个表情（随机选择）
- 纯随机贴表情功能（可设置触发间隔）
- 支持三种匹配模式：包含、完全匹配、正则表达式
- 支持QQ表情和Unicode Emoji
- 可配置忽略大小写

## 安装

在 koishi 插件市场搜索 emoji-like 安装。

## 配置要求

### LLOneBot HTTP 服务

插件需要 LLOneBot 的 HTTP 服务支持。请确保已开启 HTTP 服务：

[![LLOneBot HTTP 配置](https://i.postimg.cc/BZcvKQdc/1.png)](https://postimg.cc/pyrxNxVp)

### 配置项

#### OneBot 配置
- **OneBot HTTP 地址**: LLOneBot 的 HTTP 服务地址（默认：http://127.0.0.1:3000）
- **访问令牌**: 可选，用于身份验证

#### 基础配置
- **匹配模式**: 包含/完全匹配/正则表达式（默认：包含）
- **忽略大小写**: 是否忽略关键词大小写（默认：启用）
- **冷却时间**: 同一消息的冷却时间，单位秒（默认：3秒）
- **调试模式**: 开启详细日志输出

#### 关键词规则配置
- **关键词**: 触发贴表情的关键词
- **表情ID**: 表情ID，支持多个表情用英文逗号分隔（如：76,99,128077）
- **群组ID列表**: 限定生效的群组，用英文逗号分隔（如：123456,789012，留空表示所有群）
- **匹配模式**: 单独设置该规则的匹配模式（留空使用全局设置）
- **忽略大小写**: 单独设置该规则是否忽略大小写（留空使用全局设置）

#### 随机贴表情配置
- **启用随机贴表情**: 是否启用纯随机贴表情功能（仅在未命中关键词时触发）
- **消息间隔**: 每隔N条消息触发一次（0~500，0表示每条消息都触发，默认：20）
- **随机表情池**: 随机表情池，多个表情用英文逗号分隔（默认内置精选Emoji）
- **随机群组**: 仅在指定群内进行随机贴表情，用英文逗号分隔（留空表示所有群）

## 使用方法

### 基础使用
1. 安装并启用插件
2. 配置 OneBot 连接信息
3. 添加关键词和对应的表情ID
4. 在群聊中发送匹配的关键词，机器人将自动贴表情

### 多表情配置示例
```
关键词：666
表情ID：76,99,128077,201
```
当有人发送"666"时，机器人会从 赞、鼓掌、👍、点赞 中随机选一个贴表情。

### 随机贴表情示例
```
启用随机贴表情：☑
消息间隔：50
随机表情池：9728,76,99,128077,128514
随机群组：123456,789012
```
在指定群中，每隔50条消息（未命中关键词的消息）会随机贴一个表情。

### 测试功能
发送 `emoji-test [表情ID]` 命令可以测试贴表情功能是否正常工作。

## 表情ID参考

### QQ表情（推荐）
- `76` - 赞
- `99` - 鼓掌
- `201` - 点赞
- `179` - doge

### Emoji表情
- `128077` - 👍
- `128079` - 👏
- `128514` - 😂
- `128293` - 🔥

完整表情ID列表请参考插件配置页面。

## 更新日志

### v0.2.0 (2025-01-11)
**新功能**
- ✨ 支持一个关键词对应多个表情（逗号分隔，随机选择）
- ✨ 新增纯随机贴表情功能
- ✨ 支持按群独立设置消息间隔（0~500条消息）
- ✨ 支持限制随机功能只在指定群生效
- ✨ 内置Emoji表情池（40+个常用表情）

**改进**
- 🔧 统一配置方式：所有多项配置均使用逗号分隔
- 🔧 按群独立计算消息间隔，避免跨群影响
- 🔧 优化配置界面，移除复杂的数组控件
- 📝 完善调试日志，支持分群显示计数状态

**配置变更**
- 表情ID支持多个：`76,99,128077`
- 群组ID改为字符串：`123456,789012`
- 新增随机贴表情相关配置项

### v0.1.x
- 🎉 初始版本
- ⚡ 基础关键词匹配贴表情功能
- 🔧 支持三种匹配模式
- 🛠️ 支持QQ表情和Emoji表情

## 兼容性说明

- ✅ 仅在 LLOneBot 下测试
- ❓ 其他 OneBot 实现未经测试

## 免责声明

本插件仅供学习和研究使用。使用本插件所产生的任何后果，作者不承担任何责任。请遵守相关平台的使用条款和当地法律法规。

## 作者

[WhiteBr1ck](https://github.com/WhiteBr1ck)
